
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="/theme/pygments/tango.min.css">


  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">




    <link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/83315320?v=4" type="image/x-icon">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/83315320?v=4" type="image/x-icon">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W64WTXBCXN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-W64WTXBCXN');
  </script>


<meta name="author" content="Essa Alshammari" />
<meta name="description" content="تجريف, مسح, كشط الويب web scraping باستخدام مكتبة gazpacho" />
<meta name="keywords" content="بايثون 101">


<meta property="og:site_name" content="بايثون - Python Language"/>
<meta property="og:title" content="مكتبة gazpacho"/>
<meta property="og:description" content="تجريف, مسح, كشط الويب web scraping باستخدام مكتبة gazpacho"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/posts/2021/gazpacho.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2021-05-10 06:04:00+03:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/essa-alshammari.html">
<meta property="article:section" content="مكتبات بايثون"/>
<meta property="article:tag" content="بايثون 101"/>
<meta property="og:image" content="https://avatars.githubusercontent.com/u/83315320?v=4">

  <title>بايثون - Python Language &ndash; مكتبة gazpacho</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="">
        <img src="https://avatars.githubusercontent.com/u/83315320?v=4" alt="" title="">
      </a>

      <h1>
        <a href=""></a>
      </h1>



      <nav>
        <ul class="list">



            <li>
              <a target="_self" href="" >الرئيسية</a>
            </li>
            <li>
              <a target="_self" href="/categories.html" >الاقسام</a>
            </li>
            <li>
              <a target="_self" href="/tags.html" >الوسوم</a>
            </li>
            <li>
              <a target="_self" href="/authors.html" >الكُتاب</a>
            </li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/pythonarabic" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-telegram" href="https://t.me/arabipython" target="_blank">
              <i class="fab fa-telegram"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main dir="rtl">


<article class="single">
  <header>
      
    <h1 id="gazpacho">مكتبة gazpacho</h1>
    <p>
       نشر في يوم ن 10 مايو 2021 في قسم \ اقسام <a href="/category/mktbt-bythwn.html">مكتبات بايثون</a>

    </p>
  </header>


  <div>
    <h3>تجريف, مسح, كشط الويب web scraping باستخدام مكتبة gazpacho</h3>
<p>دائما ما نحتاج لمثل هذه المكتبات لاستخراج كمية من البيانات الموجودة على صفحات الويب
خصوصاً تلك التي لا توفر واجهة برمجية API لاخذ البيانات منها لتحليلها او تخزينها او عرضها بطرق اخرى او اياً كان الهدف.</p>
<p>هنا يأتي دور السكريبينق سموه ما شئتم بالعربي مثل ما ذكر في عنوان الموضوع.
هو ببساطة استخراج المعلومات من صفحات الانترنت.</p>
<blockquote>
<p>يرجى الانتباه فعملية السكريبينق غير قانونية في بعض المواقع</p>
</blockquote>
<p>اليوم سنتتعلم كيفية فعل ذلك باستخدام مكتبة جميلة اسمها gazpacho.</p>
<p>هناك العديد من الخيارات في البايثون لفعل مثل ذلك ومنها استخدام مكتبة beautifulSoup مع requests وهذه اشهرها وغيرها الكثير.</p>
<p>لكن ما يميز مكتبة gazpacho بساطتها  وسرعتهاواستقرارها واصلاح الاخطاء فيها من قبل مطوريها والافضل فيها انها لا تعتمد على مكتبة اخرى اطلاقا كل ما تحتاجة فقط البايثون.</p>
<p>هنا <a href="https://gazpacho.xyz/" target="_blank">الصفحة الرسمية</a>
 للمشروع مع التوثيق الرسمي </p>
<p>لنبدأ</p>
<p>اولا نقوم بثبيت المكتبة عن طريق الامر التالي</p>
<div class="highlight"><pre><span></span><code>pip install gazpacho
</code></pre></div>

<p>السيناريو كالتالي :</p>
<p>نريد استخراج المعلومات من هذا الموقع <a href="http://quotes.toscrape.com/">http://quotes.toscrape.com/</a></p>
<p>والذي يعرض مقولات مشهورة ومن قالها وهذه هي نوعية البيانات التي نريد سحبها</p>
<ul>
<li>اولا نريد الاتصال بالموقع حتى نتمكن من قراءة ما يحتوية.</li>
</ul>
<p>المكتبة توفر لنا فنكشن لعمل ذلك </p>
<div class="highlight"><pre><span></span><code>get(url)
</code></pre></div>

<p>اذا لنقوم بجلبها داخل ملفنا</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span>
</code></pre></div>
</td></tr></table>
<p>هذه الداله او الفنكشن تتطلب ان نعطيها url رابط الصفحة التي نرغب بالاطلاع على محتواها.</p>
<p>لنقم بذلك</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>هنا نقوم بتخزين المخرجات من get داخل المتغير html لانها سوف ترجع لنا بيانات الصفحة داخل نص مكتوب بـ html</p>
<p>لنلقي نظرة على اول 100 حرف مع نوع البيانات المخرج.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">[:</span><span class="mi">100</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>الكود السابق سوف يطبع لنا التالي</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Quotes to Scrape<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">class</span> <span class="err">&#39;</span><span class="na">str</span><span class="err">&#39;</span><span class="p">&gt;</span> 
</code></pre></div>

<p>كما نرا فمحتويات المتغير html هي فعلا مكتوبة بــ html
ونوع بيانات المتغير html من نوع string نص</p>
<p>وهذه بحد ذاتها مشكلة الان كيف سنقوم بالبحث داخل النص.
يمكننا ذلك من خلال طرق كثيرة لعل اشهرها regex التعابير القياسية.</p>
<p>لكن مكتبة gazpacho توفر لنا كلاس Soup لتسهيل عملية البحث والتمحيص.</p>
<p>لنقم باستدعاء Soup</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">Soup</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>لنقم بعد ذلك باعطاء المتغير html للكلاس Soup</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">Soup</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">Soup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>لو قمنا بطباعة محتويات المتغير soup سوف يعطينا نفس البيانات التي كان يحملها المتغير html.</p>
<p>لكن لو قمنا بطباعة نوع المتغير </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">Soup</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">Soup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>
<p>فسوف يظهر لنا</p>
<div class="highlight"><pre><span></span><code>&lt;class &#39;gazpacho.soup.Soup&#39;&gt;
</code></pre></div>

<p>وهذا هو الفائدة من المكتبة ككل الان المتغير soup هو object يحمل في طياته اهم ميثود وهو find</p>
<div class="highlight"><pre><span></span><code>soup.find(tag, atrrs)
</code></pre></div>

<p>هذا الميثود ياخذ الكثير من الاشياء لكن اهما:</p>
<ul>
<li>tag وهو التاق المكتوب داخل ملف html  مثل div ويجب ان نعطيه للميثود على شكل str</li>
<li>attrs وهذا الاتريبيوتز المكتوبة داخل التاق مثل <code>&lt;div class="someClass"&gt;&lt;/div&gt;</code> ويجب ان نعطيه للميثود كـ dict</li>
</ul>
<p>مثال اذا اردنا ان نبحث عن المقولة  الموجودة في صفحة الويب التالية</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;quote&quot;</span> <span class="err">itemscope</span> <span class="na">itemtype=</span><span class="s">&quot;http://schema.org/CreativeWork&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;text&quot;</span> <span class="na">itemprop=</span><span class="s">&quot;text&quot;</span><span class="nt">&gt;</span>“A day without sunshine is like, you know, night.”<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span&gt;</span>by <span class="nt">&lt;small</span> <span class="na">class=</span><span class="s">&quot;author&quot;</span> <span class="na">itemprop=</span><span class="s">&quot;author&quot;</span><span class="nt">&gt;</span>Steve Martin<span class="nt">&lt;/small&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/author/Steve-Martin&quot;</span><span class="nt">&gt;</span>(about)<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre></div>

<p>فسوسف يكون الكود كالتالي</p>
<div class="highlight"><pre><span></span><code>soup.find(&#39;span&#39;, attrs={&#39;class&#39;: &#39;text&#39;})
</code></pre></div>

<ul>
<li>span هو التاق الذي نبحث عنه ولكن ليس كل التاقات التي تحمل هذا النوع</li>
<li>attrs={'class': 'text'} فقط تلك التي يكون في داخلها كلاس اسمه text</li>
</ul>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">Soup</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">Soup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;text&#39;</span><span class="p">})</span>
</code></pre></div>
</td></tr></table>
<p>الكود السابق سوف يقوم بارجاع لست list فيها بيانات جميع التاقات التي تحمل الخصائص المذكورة مسبقا</p>
<p>بذلك يمكننا عمل لووب من نوع for حتى  نتمكن من طباعة ما بداخل التاق فقط </p>
<p>لنقم بذلك</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">gazpacho</span> <span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">Soup</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://quotes.toscrape.com/&quot;</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">Soup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="n">quotes</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;text&#39;</span><span class="p">})</span>
<span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">quotes</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
<p>هنا استخدمنا المتغير text المعرف لنا مسبقاً من قبل الكلاسSoup.</p>
<p>وهذه هي المخرجات</p>
<div class="highlight"><pre><span></span><code>“<span class="nv">The</span> <span class="nv">world</span> <span class="nv">as</span> <span class="nv">we</span> <span class="nv">have</span> <span class="nv">created</span> <span class="nv">it</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">process</span> <span class="nv">of</span> <span class="nv">our</span> <span class="nv">thinking</span>. <span class="nv">It</span> <span class="nv">cannot</span> <span class="nv">be</span> <span class="nv">changed</span> <span class="nv">without</span> <span class="nv">changing</span> <span class="nv">our</span> <span class="nv">thinking</span>.”

“<span class="nv">It</span> <span class="nv">is</span> <span class="nv">our</span> <span class="nv">choices</span>, <span class="nv">Harry</span>, <span class="nv">that</span> <span class="k">show</span> <span class="nv">what</span> <span class="nv">we</span> <span class="nv">truly</span> <span class="nv">are</span>, <span class="nv">far</span> <span class="nv">more</span> <span class="nv">than</span> <span class="nv">our</span> <span class="nv">abilities</span>.”

“<span class="nv">There</span> <span class="nv">are</span> <span class="nv">only</span> <span class="nv">two</span> <span class="nv">ways</span> <span class="nv">to</span> <span class="nv">live</span> <span class="nv">your</span> <span class="nv">life</span>. <span class="nv">One</span> <span class="nv">is</span> <span class="nv">as</span> <span class="nv">though</span> <span class="nv">nothing</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">miracle</span>. <span class="nv">The</span> <span class="nv">other</span> <span class="nv">is</span> <span class="nv">as</span> <span class="nv">though</span> <span class="nv">everything</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">miracle</span>.”

“<span class="nv">The</span> <span class="nv">person</span>, <span class="nv">be</span> <span class="nv">it</span> <span class="nv">gentleman</span> <span class="nv">or</span> <span class="nv">lady</span>, <span class="nv">who</span> <span class="nv">has</span> <span class="nv">not</span> <span class="nv">pleasure</span> <span class="nv">in</span> <span class="nv">a</span> <span class="nv">good</span> <span class="nv">novel</span>, <span class="nv">must</span> <span class="nv">be</span> <span class="nv">intolerably</span> <span class="nv">stupid</span>.”

“<span class="nv">Imperfection</span> <span class="nv">is</span> <span class="nv">beauty</span>, <span class="nv">madness</span> <span class="nv">is</span> <span class="nv">genius</span> <span class="nv">and</span> <span class="nv">it</span><span class="s1">&#39;</span><span class="s">s better to be absolutely ridiculous than absolutely boring.”</span>

“<span class="nv">Try</span> <span class="nv">not</span> <span class="nv">to</span> <span class="nv">become</span> <span class="nv">a</span> <span class="nv">man</span> <span class="nv">of</span> <span class="nv">success</span>. <span class="nv">Rather</span> <span class="nv">become</span> <span class="nv">a</span> <span class="nv">man</span> <span class="nv">of</span> <span class="nv">value</span>.”

“<span class="nv">It</span> <span class="nv">is</span> <span class="nv">better</span> <span class="nv">to</span> <span class="nv">be</span> <span class="nv">hated</span> <span class="k">for</span> <span class="nv">what</span> <span class="nv">you</span> <span class="nv">are</span> <span class="nv">than</span> <span class="nv">to</span> <span class="nv">be</span> <span class="nv">loved</span> <span class="k">for</span> <span class="nv">what</span> <span class="nv">you</span> <span class="nv">are</span> <span class="nv">not</span>.”

“<span class="nv">I</span> <span class="nv">have</span> <span class="nv">not</span> <span class="nv">failed</span>. <span class="nv">I</span><span class="s1">&#39;</span><span class="s">ve just found 10,000 ways that won</span><span class="s1">&#39;</span><span class="nv">t</span> <span class="nv">work</span>.”

“<span class="nv">A</span> <span class="nv">day</span> <span class="nv">without</span> <span class="nv">sunshine</span> <span class="nv">is</span> <span class="nv">like</span>, <span class="nv">you</span> <span class="nv">know</span>, <span class="nv">night</span>.”
</code></pre></div>

<p>هنا قمنا باستخراج بيانات الصفحة المقولات فقط بكل سهولة الان انت قم باستخراج من القائل من الصفحة واطبعه بجانب المقولة.</p>
<p>لمعرفة ما هو التاق والاتريبيوتز المستخدمة في الصفحة بأمكانك استخدام ادوات المطورين في كروم او اي متصفح اخر او حتى يمكنك قراءة الشيفرة المصدرية من خلال الضغط على زر الماوس الايمن داخل صفحة الويب ومن ثم الضغط على view page source او inspect.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/bythwn-101.html">بايثون 101</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy; 2021 Essa Alshammari</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " بايثون - Python Language ",
  "url" : "",
  "image": "https://avatars.githubusercontent.com/u/83315320?v=4",
  "description": ""
}
</script>


</body>
</html>